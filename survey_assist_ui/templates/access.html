{% extends "layout/_template.njk" %}
{% from "components/access-code/_macro.njk" import onsAccessCode %}
{% from "components/input/_macro.njk" import onsInput %}
{% from "components/button/_macro.njk" import onsButton %}
{% from "components/panel/_macro.njk" import onsPanel %}
{% from "components/details/_macro.njk" import onsDetails %}
{%
    set pageConfig = {
        "header": {
            "title": title,
            "mastheadLogo": {
              "large": '<img class="logo" src="https://cdn.ons.gov.uk/assets/images/ons-logo/v2/ons-logo.svg" height="150" width="250" alt="Office for National Statistics logo">'
            },
            "titleLogo": "/",
        },
        "meta": {
            "canonicalUrl": "/",
            "description": "/",
        },
        
    }
%}

{% block main %}
    {% if error %}
        {%
            call onsPanel({
                "title": "There is a problem validating your ONS ID or PFR ID",
                "variant": "error"
            })
        %}
        {{error}}
    {% endcall %}
    {% endif %}
    <h1 class="ons-u-mt-2xl">Start study</h1>
    <form method="POST" action="{{ url_for('access.check_access') }}"> 

    {{
        onsInput({
            "id": "unique-participant-id",
            "name": "participant-id",
            "type": "text",
            "label": {
                "text": "Enter your ONS Participant ID",
                "description": "This ID will have been provided to you in the email from PFR."
            },
            "attributes": { "required": true }
        })
    }}
    {{
        onsAccessCode({
            "id": "unique-access-code",
            "name": "access-code",
            "label": {
                "text": "Enter your 16-character PFR ID",
                "description": "This ID can be found in the email invite PFR sent you. This ID will be used to gain access to the study and process your incentive.<br><br>You do <b>not</b> need to type code separators, such as dashes or hyphens"
            },
            "securityMessage": "Your personal information is protected by law and will be kept confidential",
            "attributes": { "required": true }
        })
    }}

    {{
        onsButton({
            "text": "Access study",
            "classes": "ons-u-mb-2xl ons-u-mt-s"
        })
    }}
    </form>

    <h2>If you do not have an access code</h2>
    <p>
        If you have lost or not received an access code, you can <a href="mailto:support@peopleforresearch.co.uk">request a new access code</a>.
    </p>
{% endblock %}